#! /bin/sh 

Files_Txt_Dir=$srcdir/files/txt
Files_Sdif_Dir=./files/sdif
Files_Txt_Sdif_Txt_Dir=./files/txtw
Files_Txt_Sdif_Txt_Sdif_Dir=./files/sdifw

sleep 1 # Wait one second
echo
echo \*************************************************************************
echo "*** Compares files generated by tosdif and tosdif->sdiftotext->tosdif ***"
echo \*************************************************************************
for namein in  $Files_Sdif_Dir/*.sdif; do
    base=`basename $namein`
    sdifnameout=$Files_Txt_Sdif_Txt_Sdif_Dir/$base.txt.sdif
    cmp $namein $sdifnameout
    if [ $? != "0" ]; then
      exit 1
    fi 
done

echo \*************************************************************************
echo "*** Compares original files with files generated by tosdif->sdiftotext **"
echo \*************************************************************************
for namein in  $Files_Txt_Dir/*.txt; do
    base=`basename $namein`
    sdifnameout=$Files_Txt_Sdif_Txt_Dir/$base.sdif.txt
    diff -q $namein $sdifnameout
    if [ $? != "0" ]; then
      exit 1
    fi 
done

echo